"use strict";(self.webpackChunkZmitaCart=self.webpackChunkZmitaCart||[]).push([[919],{4919:(B,f,l)=>{l.r(f),l.d(f,{LoginComponent:()=>F});var v=l(4755),u=l(9401),_=l(5402),k=l(2950),O=l(430),R=l(5525),p=l(3431),g=l(5995),m=l(7579),I=l(9300),U=l(8505),y=l(2722),E=l(6012),P=l(5861),t=l(2223),b=l(1135),S=l(4707);class D extends m.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(a){const{hasError:e,_hasValue:o,_value:i,thrownError:s,isStopped:r,_isComplete:c}=this;e?a.error(s):(r||c)&&(o&&a.next(i),a.complete())}next(a){this.isStopped||(this._value=a,this._hasValue=!0)}complete(){const{_hasValue:a,_value:e,_isComplete:o}=this;o||(this._isComplete=!0,a&&super.next(e),super.complete())}}var x=l(5191),w=l(5684),M=l(5698);class N{constructor(){}loadScript(a,e,o,i=null){if(typeof document<"u"&&!document.getElementById(a)){let s=document.createElement("script");s.async=!0,s.src=e,s.onload=o,i||(i=document.head),i.appendChild(s)}}}class A{}const C={oneTapEnabled:!0};let d=(()=>{class n extends N{constructor(e,o){super(),this.clientId=e,this.initOptions=o,this.changeUser=new t.vpe,this._socialUser=new b.X(null),this._accessToken=new b.X(null),this._receivedAccessToken=new t.vpe,this.initOptions={...C,...this.initOptions},this._socialUser.pipe((0,w.T)(1)).subscribe(this.changeUser),this._accessToken.pipe((0,w.T)(1)).subscribe(this._receivedAccessToken)}initialize(e){return new Promise((o,i)=>{try{this.loadScript(n.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:s})=>{const r=this.createSocialUser(s);this._socialUser.next(r)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,I.h)(s=>null===s)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const s=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(r=>r).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:s,prompt:this.initOptions.prompt,callback:r=>{r.error?this._accessToken.error({code:r.error,description:r.error_description,uri:r.error_uri}):this._accessToken.next(r.access_token)}})}o()})}catch(s){i(s)}})}getLoginStatus(){return new Promise((e,o)=>{this._socialUser.value?e(this._socialUser.value):o(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,o)=>{google.accounts.id.revoke(this._socialUser.value.id,i=>{i.error?o(i.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,o)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,M.q)(1)).subscribe(e)):o(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,o)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):o("No access token to revoke"):o("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var e=this;return(0,P.Z)(function*(){google.accounts.id.disableAutoSelect(),e._socialUser.next(null)})()}createSocialUser(e){const o=new A;o.idToken=e;const i=this.decodeJwt(e);return o.id=i.sub,o.name=i.name,o.email=i.email,o.photoUrl=i.picture,o.firstName=i.given_name,o.lastName=i.family_name,o}decodeJwt(e){const i=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(i).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}}return n.PROVIDER_ID="GOOGLE",n})(),T=(()=>{class n{get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(e,o,i){this._ngZone=o,this._injector=i,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new S.t(1),this.initialized=!1,this._initState=new D,e instanceof Promise?e.then(s=>{this.initialize(s)}):this.initialize(e)}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:o=console.error}=e;e.providers.forEach(i=>{this.providers.set(i.id,"prototype"in i.provider?this._injector.get(i.provider):i.provider)}),Promise.all(Array.from(this.providers.values()).map(i=>i.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const i=[];let s=!1;this.providers.forEach((r,c)=>{const h=r.getLoginStatus();i.push(h),h.then(L=>{this.setUser(L,c),s=!0}).catch(console.debug)}),Promise.all(i).catch(()=>{s||(this._user=null,this._authState.next(null))})}this.providers.forEach((i,s)=>{(0,x.b)(i.changeUser)&&i.changeUser.subscribe(r=>{this._ngZone.run(()=>{this.setUser(r,s)})})})}).catch(i=>{o(i)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){var o=this;return(0,P.Z)(function*(){const i=o.providers.get(e);if(!o.initialized)throw n.ERR_NOT_INITIALIZED;if(!i)throw n.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(i instanceof d))throw n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield i.getAccessToken()})()}refreshAuthToken(e){return new Promise((o,i)=>{if(this.initialized){const s=this.providers.get(e);s?"function"!=typeof s.refreshToken?i(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):s.refreshToken().then(r=>{this.setUser(r,e),o()}).catch(r=>{i(r)}):i(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(n.ERR_NOT_INITIALIZED)})}refreshAccessToken(e){return new Promise((o,i)=>{if(this.initialized)if(e!==d.PROVIDER_ID)i(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const s=this.providers.get(e);s instanceof d?s.revokeAccessToken().then(o).catch(i):i(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(n.ERR_NOT_INITIALIZED)})}signIn(e,o){return new Promise((i,s)=>{if(this.initialized){let r=this.providers.get(e);r?r.signIn(o).then(c=>{this.setUser(c,e),i(c)}).catch(c=>{s(c)}):s(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(n.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((o,i)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{o(),this.setUser(null)}).catch(c=>{i(c)}):i(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(n.ERR_NOT_LOGGED_IN);else i(n.ERR_NOT_INITIALIZED)})}setUser(e,o){e&&o&&(e.provider=o),this._user=e,this._authState.next(e)}}return n.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",n.ERR_NOT_LOGGED_IN="Not logged in",n.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",n.\u0275fac=function(e){return new(e||n)(t.LFG("SocialAuthServiceConfig"),t.LFG(t.R0b),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z=(()=>{class n{constructor(e,o,i,s){this.router=void 0,this._ngZone=void 0,this.authenticationService=void 0,this.authService=void 0,this.onDestroy$=new m.x,this.router=e,this._ngZone=o,this.authenticationService=i,this.authService=s}ngOnInit(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"210267773068-m3nvq2q18bug70vojhiect78nv8i81g5.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(document.getElementById("googleLoginButton"),{theme:"outline",size:"large",text:"continue_with"})}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}handleCredentialResponse(e){this.authenticationService.googleLogin(e.credential).pipe((0,y.R)(this.onDestroy$)).subscribe(()=>{this._ngZone.run(()=>{this.router.navigate(["/"])})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(t.R0b),t.Y36(g.$),t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["pp-google-login"]],standalone:!0,features:[t._Bn([g.$,T,{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:d.PROVIDER_ID,provider:new d("210267773068-m3nvq2q18bug70vojhiect78nv8i81g5.apps.googleusercontent.com")}]}}]),t.jDz],decls:1,vars:0,consts:[["id","googleLoginButton"]],template:function(e,o){1&e&&t._UZ(0,"div",0)},dependencies:[v.ez,E.QW],styles:["[_nghost-%COMP%]{width:100%}"],changeDetection:0}),n})();function j(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.togglePasswordVisibility())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.passwordVisible?"visibility_off":"visibility"," ")}}const Z=function(){return{required:"Wprowad\u017a adres e-mail",pattern:"Adres e-mail jest nieprawid\u0142owy",busy:"Podany adres e-mail jest ju\u017c u\u017cywany"}},G=function(){return{required:"Wprowad\u017a has\u0142o",pattern:"Has\u0142o powinno zawiera\u0107 od 8 do 30 znak\xf3w, w tym jedna cyfra"}};let F=(()=>{class n{constructor(e,o){this.authenticationService=void 0,this.router=void 0,this.REGISTER_LINK=`/${R.G.AUTHENTICATION}/${R.G.REGISTER}`,this.onDestroy$=new m.x,this.form=new u.cw({email:new u.NI("",u.kI.compose([u.kI.required,u.kI.pattern(_.s)])),password:new u.NI("",u.kI.compose([u.kI.required,u.kI.pattern(_.l)]))},{updateOn:"change"}),this.passwordVisible=!1,this.authenticationService=e,this.router=o}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}login(){this.form.valid&&this.authenticationService.login(this.form.value).pipe((0,I.h)(e=>!!e),(0,U.b)(()=>this.router.navigate(["/"])),(0,y.R)(this.onDestroy$)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.$),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["pp-login"]],standalone:!0,features:[t._Bn([g.$]),t.jDz],decls:39,vars:8,consts:[[1,"content","fixWidth"],[1,"maxWidth"],[1,"box",3,"formGroup","ngSubmit"],[1,"login"],["label","login lub e-mail","placeholder","Wprowad\u017a adres e-mail","controlName","email",3,"ppErrorMessage"],["label","has\u0142o","placeholder","8-30 znak\xf3w, w tym cyfra","controlName","password",3,"type","suffixTemplate","ppErrorMessage"],[1,"get"],["href","https://www.youtube.com/watch?v=E8mH9uT0S1A","target","_blank",1,"text"],["type","submit",1,"button","button-login","cursor-pointer"],[1,"or"],[1,"line"],[1,"margin"],["type","button",1,"button","button-bottom"],["src","https://a.allegroimg.com/original/346332/47549ea444eba9db98fe50d3f374/information-social-facebook-1b4340531f.svg",1,"img"],["src","https://assets.allegrostatic.com/sc-13390/statics/phone_icon_efb43bd6.svg",1,"img"],[1,"box","nextBox"],[1,"register","cursor-pointer",3,"routerLink"],[1,"box","remove"],[1,"regulamin","fixWidth"],["href","https://www.youtube.com/watch?v=x0Zr0kN0VeI","target","_blank",1,"regulamin","link"],["href","https://policja.pl/","target","_blank",1,"regulamin","link"],["suffixPassword",""],["matSuffix","",1,"cursor-pointer",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.login()}),t.TgZ(3,"span",3),t._uU(4,"Zaloguj si\u0119"),t.qZA(),t._UZ(5,"pp-input",4)(6,"pp-input",5),t.TgZ(7,"div",6)(8,"a",7),t._uU(9," Odzyskaj has\u0142o "),t.qZA()(),t.TgZ(10,"button",8),t._uU(11," ZALOGUJ SI\u0118 "),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"div",10),t.TgZ(14,"span"),t._uU(15,"lub"),t.qZA(),t._UZ(16,"div",10),t.qZA(),t._UZ(17,"pp-google-login",11),t.TgZ(18,"button",12),t._UZ(19,"img",13),t._uU(20," KONTYNUUJ PRZEZ FACEBOOK "),t.qZA(),t.TgZ(21,"button",12),t._UZ(22,"img",14),t._uU(23," U\u017bYJ NUMERU TELEFONU "),t.qZA()(),t.TgZ(24,"div",15)(25,"b"),t._uU(26,"Nie masz konta?"),t.qZA(),t.TgZ(27,"span",16),t._uU(28," ZA\u0141\xd3\u017b KONTO "),t.qZA()()(),t._UZ(29,"div",17),t.qZA(),t.TgZ(30,"div",18),t._uU(31," Loguj\u0105c si\u0119 do ZmitaCart akceptujesz "),t.TgZ(32,"a",19),t._uU(33," Regulamin "),t.qZA(),t._uU(34," w aktualnym brzmieniu obowi\u0105zuj\u0105cym od dnia 29.02.1928. Informacje o planowanych oraz archiwalnych zmianach Regulaminu s\u0105 dost\u0119pne na "),t.TgZ(35,"a",20),t._uU(36," stronie "),t.qZA()(),t.YNc(37,j,2,1,"ng-template",null,21,t.W1O)),2&e){const i=t.MAs(38);t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ppErrorMessage",t.DdM(6,Z)),t.xp6(1),t.Q6J("type",o.passwordVisible?"text":"password")("suffixTemplate",i)("ppErrorMessage",t.DdM(7,G)),t.xp6(21),t.Q6J("routerLink",o.REGISTER_LINK)}},dependencies:[v.ez,u.u5,u._Y,u.JL,k.a,u.UX,u.sg,O.Ps,O.Hw,p.Bz,p.rH,z],styles:["[_nghost-%COMP%]{background-color:var(--background-login-color);padding-top:16px;padding-bottom:24px;flex:1}.content[_ngcontent-%COMP%]{margin-inline:auto;display:flex;gap:var(--gap-m)}.fixWidth[_ngcontent-%COMP%]{padding-inline:30px;width:65%}@media (max-width: 1200px){.fixWidth[_ngcontent-%COMP%]{width:55%}}@media (max-width: 768px){.fixWidth[_ngcontent-%COMP%]{width:100%;margin:unset}}.regulamin[_ngcontent-%COMP%]{padding-top:8px;margin-inline:auto;font-size:var(--font-xs)}.regulamin[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:0;color:var(--color-allegro-orange);text-decoration:none}.box[_ngcontent-%COMP%]{width:100%;min-width:400px;padding-inline:25px;padding-top:20px;padding-bottom:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;transition:padding-top .2s ease,padding-bottom .2s ease,box-shadow .2s ease;box-shadow:0 2px 6px #0000001a}.nextBox[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row;justify-content:flex-start;gap:var(--gap-s);padding-block:10px}.register[_ngcontent-%COMP%]{color:var(--color-allegro-green);line-height:var(--lineHeight-xl);vertical-align:middle;letter-spacing:2px}.bold[_ngcontent-%COMP%]{font-weight:700}.button[_ngcontent-%COMP%]{width:100%;background-color:var(--color-allegro-orange);color:#fff;border:0;padding-inline:16px;height:40px}.button-bottom[_ngcontent-%COMP%]{background-color:#fff;color:#222;border:1px solid #aaa;margin-bottom:15px;position:relative;display:flex;justify-content:center;align-items:center}.img[_ngcontent-%COMP%]{position:absolute;left:8px}.margin[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:center;width:100%}.get[_ngcontent-%COMP%]{width:100%;margin-top:24px;margin-bottom:16px}.get[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--color-allegro-green);text-decoration:none!important}.line[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #ddd}.or[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--gap-xs);width:100%;padding-block:12px}.login[_ngcontent-%COMP%]{font-size:var(--font-l);font-weight:500;color:#222;margin-bottom:14px;font-family:Roboto;width:100%}@media (max-width: 1200px){.remove[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),n})()}}]);