"use strict";(self.webpackChunkZmitaCart=self.webpackChunkZmitaCart||[]).push([[592],{5470:(D,E,t)=>{t.d(E,{B:()=>g});var p=t(3144),f=t(5160),i=t(2340),c=t(4004),s=t(262),n=t(9646),_=t(2223),v=t(3573);let g=(()=>{class o{constructor(h,e){this.http=void 0,this.toastMessageService=void 0,this.http=h,this.toastMessageService=e}sendForm(h){return this.http.put(`${i.N.httpBackend}${f.V.USER_CREDENTIALS_UPDATE}`,h).pipe((0,c.U)(()=>!0),(0,s.K)(e=>(this.toastMessageService.notifyOfError(e.error[0]),(0,n.of)(!1))))}getUserOffers(h){const e=(new p.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${f.V.USER_OFFERS}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}getFavourites(h){const e=(new p.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${f.V.OFFER_FAVOURITES}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}getBought(h){const e=(new p.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${f.V.OFFER_BOUGHT}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}}return o.\u0275fac=function(h){return new(h||o)(_.LFG(p.eN),_.LFG(v.D))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})()},5995:(D,E,t)=>{t.d(E,{$:()=>S});var p=t(4004),f=t(262),i=t(9646),c=t(8505),s=t(5160),n=t(2340),_=t(1816),v=t(5341),g=t(5297),o=t(2223),m=t(3144),h=t(3573),e=t(5691),x=t(8654);let S=(()=>{class T{constructor(d,u,O,A){this.http=void 0,this.toastMessageService=void 0,this.userService=void 0,this.localStorageService=void 0,this.http=d,this.toastMessageService=u,this.userService=O,this.localStorageService=A}register(d){return this.http.post(`${n.N.httpBackend}${s.V.REGISTER}`,d).pipe((0,p.U)(()=>!0),(0,f.K)(u=>(this.toastMessageService.notifyOfError(u.error[0]),(0,i.of)(!1))))}login(d){return this.http.post(`${n.N.httpBackend}${s.V.LOGIN}`,{...d,grantType:"password"}).pipe((0,c.b)(u=>{this.setUserStorage(u),this.userService.setUserToken(u.accessToken)}),(0,f.K)(u=>(this.toastMessageService.notifyOfError(u.error[0]),(0,i.of)(null))))}googleLogin(d){return this.http.post(`${n.N.httpBackend}${s.V.LOGIN}`,{idToken:d,grantType:"google"}).pipe((0,c.b)(u=>{this.setUserStorage(u),this.userService.setUserToken(u.accessToken)}),(0,f.K)(u=>(this.toastMessageService.notifyOfError(u.error[0]),(0,i.of)(null))))}setUserStorage(d){const u=(0,_.Z)(d.accessToken),{email:O,exp:A,firstName:C,id:B,iss:a,lastName:P,role:r}=u;this.localStorageService.setItem(v.h.USER,{refreshToken:d.refreshToken,email:O,firstName:C,id:B,iss:a,lastName:P,role:r,expires_at:(0,g.Z)(new Date,A).toISOString()})}resendEmail(d){return this.http.post(`${n.N.httpBackend}${s.V.RESEND_EMAIL}?email=${d}`,{}).pipe((0,f.K)(u=>(this.toastMessageService.notifyOfError(u.error[0]),(0,i.of)(!1))))}confirmEmail(d,u){return console.log(d,u),this.http.post(`${n.N.httpBackend}${s.V.CONFIRM_EMAIL}?Id=${d}&Token=${u}`,{}).pipe((0,f.K)(O=>(this.toastMessageService.notifyOfError(O.error[0]),(0,i.of)(!1))))}}return T.\u0275fac=function(d){return new(d||T)(o.LFG(m.eN),o.LFG(h.D),o.LFG(e.K),o.LFG(x.n))},T.\u0275prov=o.Yz7({token:T,factory:T.\u0275fac}),T})()},3506:(D,E,t)=>{t.d(E,{X:()=>i});var p=t(1135),f=t(2223);let i=(()=>{class c{constructor(){this.isShowSearch$=new p.X(!0),this.isShowAddOfferButton$=new p.X(!0)}setShowSearch(n){this.isShowSearch$.next(n)}getShowSearch(){return this.isShowSearch$.asObservable()}setShowAddOfferButton(n){this.isShowAddOfferButton$.next(n)}getShowAddOfferButton(){return this.isShowAddOfferButton$.asObservable()}resetHeaderState(){this.isShowSearch$.next(!0),this.isShowAddOfferButton$.next(!0)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},4311:(D,E,t)=>{t.d(E,{F:()=>i});var p=t(1135),f=t(2223);let i=(()=>{class c{constructor(){this.isShowOverlay$=new p.X(!1)}setState(n){this.isShowOverlay$.next(n)}getState(){return this.isShowOverlay$.asObservable()}resetState(){this.isShowOverlay$.next(!1)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},7502:(D,E,t)=>{t.d(E,{c:()=>B});var p=t(4755),f=t(3900),i=t(8505),c=t(4004),s=t(5470),n=t(9338),_=t(430),v=t(8467),g=t(6070),o=t(3437),m=t(582),h=t(2512),e=t(2223),x=t(3431);function S(a,P){if(1&a){const r=e.EpF();e.TgZ(0,"pp-offers-filters",11),e.NdJ("formEmitter",function(M){e.CHM(r);const w=e.oxw();return e.KtG(w.filterData(M))}),e.qZA()}}function T(a,P){if(1&a&&(e.TgZ(0,"div",12),e.GkF(1,13),e.qZA()),2&a){e.oxw();const r=e.MAs(15);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function I(a,P){if(1&a&&(e.ynx(0),e._UZ(1,"pp-offer-tile",14),e.BQk()),2&a){const r=e.oxw().ngIf,l=e.oxw();e.xp6(1),e.Q6J("origin",l.origin)("items",r.items)}}function d(a,P){if(1&a&&(e.ynx(0),e.YNc(1,I,2,2,"ng-container",6),e.BQk()),2&a){const r=P.ngIf;e.oxw();const l=e.MAs(11);e.xp6(1),e.Q6J("ngIf",r.items.length)("ngIfElse",l)}}function u(a,P){if(1&a&&(e.TgZ(0,"div",15),e.GkF(1,13),e.qZA()),2&a){e.oxw();const r=e.MAs(15);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function O(a,P){if(1&a&&(e.TgZ(0,"div",3),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.Oqu(r.noDataText)}}function A(a,P){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"mat-spinner"),e.qZA())}function C(a,P){if(1&a){const r=e.EpF();e.TgZ(0,"mat-icon",17),e.NdJ("click",function(){e.CHM(r);const M=e.oxw();return e.KtG(M.paginationService.nextPage(-1))}),e._uU(1," arrow_back_ios "),e.qZA(),e.TgZ(2,"div",18)(3,"input",19,20),e.NdJ("keydown.enter",function(){e.CHM(r);const M=e.MAs(4),w=e.oxw();return e.KtG(w.paginationService.changeToPage(M.value))}),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"mat-icon",17),e.NdJ("click",function(){e.CHM(r);const M=e.oxw();return e.KtG(M.paginationService.nextPage(1))}),e._uU(8," arrow_forward_ios "),e.qZA()}if(2&a){const r=e.oxw();e.ekj("hide",!r.canGo.left),e.xp6(3),e.Q6J("value",r.currentPage),e.xp6(3),e.hij("z ",r.totalPages,""),e.xp6(1),e.ekj("hide",!r.canGo.right)}}let B=(()=>{class a{constructor(r,l,M,w){this.accountService=void 0,this.offersFilteredService=void 0,this.route=void 0,this.paginationService=void 0,this.header=void 0,this.noDataText=void 0,this.origin=void 0,this.OFFERS_FORM=h.v,this.offers$=void 0,this.totalPages=1,this.currentPage=1,this.areAnyOffers=!1,this.canGo={right:!1,left:!1},this.accountService=r,this.offersFilteredService=l,this.route=M,this.paginationService=w}ngOnInit(){this.offers$=this.setData()}setData(){return"bought"===this.origin?this.paginationService.getCurrentPage().pipe((0,f.w)(r=>this.accountService.getBought(r)),(0,i.b)(r=>this.paginationService.setTotalPages(r.totalPages)),(0,i.b)(r=>this.setAll(r))):this.paginationService.getCurrentPage().pipe((0,f.w)(r=>{switch(this.origin){case"favourites":return this.accountService.getFavourites(r);case"filtered":return this.getFilteredOffers(r);case"user-offers":return this.accountService.getUserOffers(r)}}),(0,c.U)(r=>({...r,items:r.items.map(l=>({offer:{...l}}))})),(0,i.b)(r=>this.paginationService.setTotalPages(r.totalPages)),(0,i.b)(r=>this.setAll(r)))}filterData(r){this.OFFERS_FORM.patchValue(r),this.offers$=this.setData()}getFilteredOffers(r){return this.route.queryParams.pipe((0,c.U)(({c:l,i:M})=>({c:l,i:M})),(0,f.w)(({c:l,i:M})=>this.offersFilteredService.getOffers(l,M,r,this.OFFERS_FORM)))}setAll(r){this.totalPages=r.totalPages,this.currentPage=r.pageNumber,this.areAnyOffers=!!r.totalCount,this.canGo={right:r.hasNextPage,left:r.hasPreviousPage}}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(s.B),e.Y36(o.$),e.Y36(x.gz),e.Y36(n.N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["pp-offers-view"]],inputs:{header:"header",noDataText:"noDataText",origin:"origin"},standalone:!0,features:[e._Bn([s.B,n.N,o.$]),e.jDz],decls:16,vars:8,consts:[[3,"formEmitter",4,"ngIf"],[1,"fix"],[1,"header"],[1,"text"],["class","pagination",4,"ngIf"],[1,"content"],[4,"ngIf","ngIfElse"],["class","footer",4,"ngIf"],["noData",""],["loading",""],["pagination",""],[3,"formEmitter"],[1,"pagination"],[3,"ngTemplateOutlet"],[3,"origin","items"],[1,"footer"],[1,"center"],[1,"cursor-pointer",3,"click"],[1,"page"],["type","number",1,"input",3,"value","keydown.enter"],["pageNumberInput",""]],template:function(r,l){if(1&r&&(e.YNc(0,S,1,0,"pp-offers-filters",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.YNc(5,T,2,1,"div",4),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,d,2,2,"ng-container",6),e.ALo(8,"async"),e.YNc(9,u,2,1,"div",7),e.qZA()(),e.YNc(10,O,2,1,"ng-template",null,8,e.W1O),e.YNc(12,A,2,0,"ng-template",null,9,e.W1O),e.YNc(14,C,9,6,"ng-template",null,10,e.W1O)),2&r){const M=e.MAs(13);e.Q6J("ngIf","filtered"===l.origin),e.xp6(4),e.Oqu(l.header),e.xp6(1),e.Q6J("ngIf",l.areAnyOffers),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,6,l.offers$))("ngIfElse",M),e.xp6(2),e.Q6J("ngIf",l.areAnyOffers)}},dependencies:[p.ez,p.O5,p.tP,p.Ov,_.Ps,_.Hw,v.Cq,v.Ou,g.Z,m.j],styles:["pp-offers-view{width:100%;display:flex;gap:var(--gap-s)}pp-offers-view .center{width:100%;height:100%;display:flex;justify-content:center;align-items:center}pp-offers-view .input{padding-inline:16px;padding-top:2px;width:74px;text-align:center;height:40px;border:1px solid #e7e7e7;color:#000;border-radius:8px;margin-right:10px;font-size:var(--font-m)}pp-offers-view .pagination{display:flex;align-items:center}pp-offers-view .hide{color:transparent;pointer-events:none}pp-offers-view .page{margin-inline:10px}pp-offers-view .footer{display:flex;align-items:center;align-self:center}pp-offers-view input::-webkit-outer-spin-button,pp-offers-view input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}pp-offers-view input[type=number]{-moz-appearance:textfield}pp-offers-view .header{min-height:40px;border-radius:8px 8px 0 0;border-bottom:1px solid #e7e7e7;padding:16px 26px;background:#fff;display:flex;justify-content:space-between}pp-offers-view .header .text{font-size:var(--font-l);font-weight:600;text-align:unset;color:unset}pp-offers-view .content{display:flex;flex-direction:column;box-shadow:0 2px 8px #00000029;border-radius:0 0 8px 8px;margin:auto;padding:26px;background:#fff}pp-offers-view .content .text{padding-top:24px;padding-bottom:24px;color:#484848;font-size:var(--font-xs);text-align:center;display:block;max-width:80vw;margin-left:auto;margin-right:auto}pp-offers-view .fix{flex:1}\n"],encapsulation:2,changeDetection:0}),a})()},5402:(D,E,t)=>{t.d(E,{l:()=>p,s:()=>f});const p=/^(?=.*\d)(?=.*[A-Za-z\u017c\u017a\u0107\u0144\xf3\u0142\u0119\u0105\u015b\u017b\u0179\u0106\u0104\u015a\u0118\u0141\xd3\u0143]).{8,30}$/,f=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/},542:(D,E,t)=>{t.d(E,{Q:()=>p});const p=(f,i)=>{if(i)switch(f){case"Numer telefonu":return`${i.slice(0,3)}-${i.slice(3,6)}-${i.slice(6)}`;case"Kod pocztowy":return`${i.slice(0,2)}-${i.slice(2)}`}}},4707:(D,E,t)=>{t.d(E,{t:()=>i});var p=t(7579),f=t(6063);class i extends p.x{constructor(s=1/0,n=1/0,_=f.l){super(),this._bufferSize=s,this._windowTime=n,this._timestampProvider=_,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,n)}next(s){const{isStopped:n,_buffer:_,_infiniteTimeWindow:v,_timestampProvider:g,_windowTime:o}=this;n||(_.push(s),!v&&_.push(g.now()+o)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(s),{_infiniteTimeWindow:_,_buffer:v}=this,g=v.slice();for(let o=0;o<g.length&&!s.closed;o+=_?1:2)s.next(g[o]);return this._checkFinalizedStatuses(s),n}_trimBuffer(){const{_bufferSize:s,_timestampProvider:n,_buffer:_,_infiniteTimeWindow:v}=this,g=(v?1:2)*s;if(s<1/0&&g<_.length&&_.splice(0,_.length-g),!v){const o=n.now();let m=0;for(let h=1;h<_.length&&_[h]<=o;h+=2)m=h;m&&_.splice(0,m+1)}}}},5861:(D,E,t)=>{function p(i,c,s,n,_,v,g){try{var o=i[v](g),m=o.value}catch(h){return void s(h)}o.done?c(m):Promise.resolve(m).then(n,_)}function f(i){return function(){var c=this,s=arguments;return new Promise(function(n,_){var v=i.apply(c,s);function g(m){p(v,n,_,g,o,"next",m)}function o(m){p(v,n,_,g,o,"throw",m)}g(void 0)})}}t.d(E,{Z:()=>f})}}]);