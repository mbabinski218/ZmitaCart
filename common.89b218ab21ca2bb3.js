"use strict";(self.webpackChunkZmitaCart=self.webpackChunkZmitaCart||[]).push([[592],{5470:(D,d,t)=>{t.d(d,{B:()=>g});var c=t(3144),p=t(5160),i=t(2340),f=t(4004),s=t(262),n=t(9646),_=t(2223),u=t(3573);let g=(()=>{class o{constructor(h,e){this.http=void 0,this.toastMessageService=void 0,this.http=h,this.toastMessageService=e}sendForm(h){return this.http.put(`${i.N.httpBackend}${p.V.USER_CREDENTIALS_UPDATE}`,h).pipe((0,f.U)(()=>!0),(0,s.K)(e=>(this.toastMessageService.notifyOfError(e.error[0]),(0,n.of)(!1))))}getUserOffers(h){const e=(new c.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${p.V.USER_OFFERS}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}getFavourites(h){const e=(new c.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${p.V.OFFER_FAVOURITES}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}getBought(h){const e=(new c.LE).set("pageNumber",h).set("pageSize",10);return this.http.get(`${i.N.httpBackend}${p.V.OFFER_BOUGHT}`,{params:e}).pipe((0,s.K)(x=>(this.toastMessageService.notifyOfError(x.error[0]),(0,n.of)())))}}return o.\u0275fac=function(h){return new(h||o)(_.LFG(c.eN),_.LFG(u.D))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})()},5995:(D,d,t)=>{t.d(d,{$:()=>S});var c=t(4004),p=t(262),i=t(9646),f=t(8505),s=t(5160),n=t(2340),_=t(1816),u=t(5341),g=t(5297),o=t(2223),m=t(3144),h=t(3573),e=t(5691),x=t(8654);let S=(()=>{class T{constructor(O,v,M,A){this.http=void 0,this.toastMessageService=void 0,this.userService=void 0,this.localStorageService=void 0,this.http=O,this.toastMessageService=v,this.userService=M,this.localStorageService=A}register(O){return this.http.post(`${n.N.httpBackend}${s.V.REGISTER}`,O).pipe((0,c.U)(()=>!0),(0,p.K)(v=>(this.toastMessageService.notifyOfError(v.error[0]),(0,i.of)(!1))))}login(O){return this.http.post(`${n.N.httpBackend}${s.V.LOGIN}`,{...O,grantType:"password"}).pipe((0,f.b)(v=>{this.setUserStorage(v),this.userService.setUserToken(v.accessToken)}),(0,p.K)(v=>(this.toastMessageService.notifyOfError(v.error[0]),(0,i.of)(null))))}googleLogin(O){return this.http.post(`${n.N.httpBackend}${s.V.LOGIN}`,{idToken:O,grantType:"google"}).pipe((0,f.b)(v=>{this.setUserStorage(v),this.userService.setUserToken(v.accessToken)}),(0,p.K)(v=>(this.toastMessageService.notifyOfError(v.error[0]),(0,i.of)(null))))}setUserStorage(O){const v=(0,_.Z)(O.accessToken),{email:M,exp:A,firstName:I,id:B,iss:a,lastName:P,role:r}=v;this.localStorageService.setItem(u.h.USER,{refreshToken:O.refreshToken,email:M,firstName:I,id:B,iss:a,lastName:P,role:r,expires_at:(0,g.Z)(new Date,A).toISOString()})}}return T.\u0275fac=function(O){return new(O||T)(o.LFG(m.eN),o.LFG(h.D),o.LFG(e.K),o.LFG(x.n))},T.\u0275prov=o.Yz7({token:T,factory:T.\u0275fac}),T})()},3506:(D,d,t)=>{t.d(d,{X:()=>i});var c=t(1135),p=t(2223);let i=(()=>{class f{constructor(){this.isShowSearch$=new c.X(!0),this.isShowAddOfferButton$=new c.X(!0)}setShowSearch(n){this.isShowSearch$.next(n)}getShowSearch(){return this.isShowSearch$.asObservable()}setShowAddOfferButton(n){this.isShowAddOfferButton$.next(n)}getShowAddOfferButton(){return this.isShowAddOfferButton$.asObservable()}resetHeaderState(){this.isShowSearch$.next(!0),this.isShowAddOfferButton$.next(!0)}}return f.\u0275fac=function(n){return new(n||f)},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},4311:(D,d,t)=>{t.d(d,{F:()=>i});var c=t(1135),p=t(2223);let i=(()=>{class f{constructor(){this.isShowOverlay$=new c.X(!1)}setState(n){this.isShowOverlay$.next(n)}getState(){return this.isShowOverlay$.asObservable()}resetState(){this.isShowOverlay$.next(!1)}}return f.\u0275fac=function(n){return new(n||f)},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},7502:(D,d,t)=>{t.d(d,{c:()=>B});var c=t(4755),p=t(3900),i=t(8505),f=t(4004),s=t(5470),n=t(9338),_=t(430),u=t(8467),g=t(6070),o=t(3437),m=t(582),h=t(2512),e=t(2223),x=t(3431);function S(a,P){if(1&a){const r=e.EpF();e.TgZ(0,"pp-offers-filters",11),e.NdJ("formEmitter",function(E){e.CHM(r);const w=e.oxw();return e.KtG(w.filterData(E))}),e.qZA()}}function T(a,P){if(1&a&&(e.TgZ(0,"div",12),e.GkF(1,13),e.qZA()),2&a){e.oxw();const r=e.MAs(15);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function C(a,P){if(1&a&&(e.ynx(0),e._UZ(1,"pp-offer-tile",14),e.BQk()),2&a){const r=e.oxw().ngIf,l=e.oxw();e.xp6(1),e.Q6J("origin",l.origin)("items",r.items)}}function O(a,P){if(1&a&&(e.ynx(0),e.YNc(1,C,2,2,"ng-container",6),e.BQk()),2&a){const r=P.ngIf;e.oxw();const l=e.MAs(11);e.xp6(1),e.Q6J("ngIf",r.items.length)("ngIfElse",l)}}function v(a,P){if(1&a&&(e.TgZ(0,"div",15),e.GkF(1,13),e.qZA()),2&a){e.oxw();const r=e.MAs(15);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function M(a,P){if(1&a&&(e.TgZ(0,"div",3),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.Oqu(r.noDataText)}}function A(a,P){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"mat-spinner"),e.qZA())}function I(a,P){if(1&a){const r=e.EpF();e.TgZ(0,"mat-icon",17),e.NdJ("click",function(){e.CHM(r);const E=e.oxw();return e.KtG(E.paginationService.nextPage(-1))}),e._uU(1," arrow_back_ios "),e.qZA(),e.TgZ(2,"div",18)(3,"input",19,20),e.NdJ("keydown.enter",function(){e.CHM(r);const E=e.MAs(4),w=e.oxw();return e.KtG(w.paginationService.changeToPage(E.value))}),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"mat-icon",17),e.NdJ("click",function(){e.CHM(r);const E=e.oxw();return e.KtG(E.paginationService.nextPage(1))}),e._uU(8," arrow_forward_ios "),e.qZA()}if(2&a){const r=e.oxw();e.ekj("hide",!r.canGo.left),e.xp6(3),e.Q6J("value",r.currentPage),e.xp6(3),e.hij("z ",r.totalPages,""),e.xp6(1),e.ekj("hide",!r.canGo.right)}}let B=(()=>{class a{constructor(r,l,E,w){this.accountService=void 0,this.offersFilteredService=void 0,this.route=void 0,this.paginationService=void 0,this.header=void 0,this.noDataText=void 0,this.origin=void 0,this.OFFERS_FORM=h.v,this.offers$=void 0,this.totalPages=1,this.currentPage=1,this.areAnyOffers=!1,this.canGo={right:!1,left:!1},this.accountService=r,this.offersFilteredService=l,this.route=E,this.paginationService=w}ngOnInit(){this.offers$=this.setData()}setData(){return"bought"===this.origin?this.paginationService.getCurrentPage().pipe((0,p.w)(r=>this.accountService.getBought(r)),(0,i.b)(r=>this.paginationService.setTotalPages(r.totalPages)),(0,i.b)(r=>this.setAll(r))):this.paginationService.getCurrentPage().pipe((0,p.w)(r=>{switch(this.origin){case"favourites":return this.accountService.getFavourites(r);case"filtered":return this.getFilteredOffers(r);case"user-offers":return this.accountService.getUserOffers(r)}}),(0,f.U)(r=>({...r,items:r.items.map(l=>({offer:{...l}}))})),(0,i.b)(r=>this.paginationService.setTotalPages(r.totalPages)),(0,i.b)(r=>this.setAll(r)))}filterData(r){this.OFFERS_FORM.patchValue(r),this.offers$=this.setData()}getFilteredOffers(r){return this.route.queryParams.pipe((0,f.U)(({c:l,i:E})=>({c:l,i:E})),(0,p.w)(({c:l,i:E})=>this.offersFilteredService.getOffers(l,E,r,this.OFFERS_FORM)))}setAll(r){this.totalPages=r.totalPages,this.currentPage=r.pageNumber,this.areAnyOffers=!!r.totalCount,this.canGo={right:r.hasNextPage,left:r.hasPreviousPage}}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(s.B),e.Y36(o.$),e.Y36(x.gz),e.Y36(n.N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["pp-offers-view"]],inputs:{header:"header",noDataText:"noDataText",origin:"origin"},standalone:!0,features:[e._Bn([s.B,n.N,o.$]),e.jDz],decls:16,vars:8,consts:[[3,"formEmitter",4,"ngIf"],[1,"fix"],[1,"header"],[1,"text"],["class","pagination",4,"ngIf"],[1,"content"],[4,"ngIf","ngIfElse"],["class","footer",4,"ngIf"],["noData",""],["loading",""],["pagination",""],[3,"formEmitter"],[1,"pagination"],[3,"ngTemplateOutlet"],[3,"origin","items"],[1,"footer"],[1,"center"],[1,"cursor-pointer",3,"click"],[1,"page"],["type","number",1,"input",3,"value","keydown.enter"],["pageNumberInput",""]],template:function(r,l){if(1&r&&(e.YNc(0,S,1,0,"pp-offers-filters",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.YNc(5,T,2,1,"div",4),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,O,2,2,"ng-container",6),e.ALo(8,"async"),e.YNc(9,v,2,1,"div",7),e.qZA()(),e.YNc(10,M,2,1,"ng-template",null,8,e.W1O),e.YNc(12,A,2,0,"ng-template",null,9,e.W1O),e.YNc(14,I,9,6,"ng-template",null,10,e.W1O)),2&r){const E=e.MAs(13);e.Q6J("ngIf","filtered"===l.origin),e.xp6(4),e.Oqu(l.header),e.xp6(1),e.Q6J("ngIf",l.areAnyOffers),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,6,l.offers$))("ngIfElse",E),e.xp6(2),e.Q6J("ngIf",l.areAnyOffers)}},dependencies:[c.ez,c.O5,c.tP,c.Ov,_.Ps,_.Hw,u.Cq,u.Ou,g.Z,m.j],styles:["pp-offers-view{width:100%;display:flex;gap:var(--gap-s)}pp-offers-view .center{width:100%;height:100%;display:flex;justify-content:center;align-items:center}pp-offers-view .input{padding-inline:16px;padding-top:2px;width:74px;text-align:center;height:40px;border:1px solid #e7e7e7;color:#000;border-radius:8px;margin-right:10px;font-size:var(--font-m)}pp-offers-view .pagination{display:flex;align-items:center}pp-offers-view .hide{color:transparent;pointer-events:none}pp-offers-view .page{margin-inline:10px}pp-offers-view .footer{display:flex;align-items:center;align-self:center}pp-offers-view input::-webkit-outer-spin-button,pp-offers-view input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}pp-offers-view input[type=number]{-moz-appearance:textfield}pp-offers-view .header{min-height:40px;border-radius:8px 8px 0 0;border-bottom:1px solid #e7e7e7;padding:16px 26px;background:#fff;display:flex;justify-content:space-between}pp-offers-view .header .text{font-size:var(--font-l);font-weight:600;text-align:unset;color:unset}pp-offers-view .content{display:flex;flex-direction:column;box-shadow:0 2px 8px #00000029;border-radius:0 0 8px 8px;margin:auto;padding:26px;background:#fff}pp-offers-view .content .text{padding-top:24px;padding-bottom:24px;color:#484848;font-size:var(--font-xs);text-align:center;display:block;max-width:80vw;margin-left:auto;margin-right:auto}pp-offers-view .fix{flex:1}\n"],encapsulation:2,changeDetection:0}),a})()},5402:(D,d,t)=>{t.d(d,{l:()=>c,s:()=>p});const c=/^(?=.*\d)(?=.*[A-Za-z\u017c\u017a\u0107\u0144\xf3\u0142\u0119\u0105\u015b\u017b\u0179\u0106\u0104\u015a\u0118\u0141\xd3\u0143]).{8,30}$/,p=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/},542:(D,d,t)=>{t.d(d,{Q:()=>c});const c=(p,i)=>{if(i)switch(p){case"Numer telefonu":return`${i.slice(0,3)}-${i.slice(3,6)}-${i.slice(6)}`;case"Kod pocztowy":return`${i.slice(0,2)}-${i.slice(2)}`}}},4707:(D,d,t)=>{t.d(d,{t:()=>i});var c=t(7579),p=t(6063);class i extends c.x{constructor(s=1/0,n=1/0,_=p.l){super(),this._bufferSize=s,this._windowTime=n,this._timestampProvider=_,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,n)}next(s){const{isStopped:n,_buffer:_,_infiniteTimeWindow:u,_timestampProvider:g,_windowTime:o}=this;n||(_.push(s),!u&&_.push(g.now()+o)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(s),{_infiniteTimeWindow:_,_buffer:u}=this,g=u.slice();for(let o=0;o<g.length&&!s.closed;o+=_?1:2)s.next(g[o]);return this._checkFinalizedStatuses(s),n}_trimBuffer(){const{_bufferSize:s,_timestampProvider:n,_buffer:_,_infiniteTimeWindow:u}=this,g=(u?1:2)*s;if(s<1/0&&g<_.length&&_.splice(0,_.length-g),!u){const o=n.now();let m=0;for(let h=1;h<_.length&&_[h]<=o;h+=2)m=h;m&&_.splice(0,m+1)}}}},5861:(D,d,t)=>{function c(i,f,s,n,_,u,g){try{var o=i[u](g),m=o.value}catch(h){return void s(h)}o.done?f(m):Promise.resolve(m).then(n,_)}function p(i){return function(){var f=this,s=arguments;return new Promise(function(n,_){var u=i.apply(f,s);function g(m){c(u,n,_,g,o,"next",m)}function o(m){c(u,n,_,g,o,"throw",m)}g(void 0)})}}t.d(d,{Z:()=>p})}}]);