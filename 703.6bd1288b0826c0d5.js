"use strict";(self.webpackChunkZmitaCart=self.webpackChunkZmitaCart||[]).push([[703],{3703:(L,I,c)=>{c.r(I),c.d(I,{LoginComponent:()=>X});var v=c(4755),d=c(9401),_=c(5402),y=c(2950),b=c(430),f=c(5525),u=c(3431),m=c(5995),g=c(7579),p=c(9300),h=c(8505),M=c(2722),o=c(2223),C=c(1217);let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[C.BQ,v.ez,C.BQ]}),t})();var R=c(5861),w=c(1135),j=c(4707);class G extends g.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(r){const{hasError:e,_hasValue:i,_value:n,thrownError:a,isStopped:s,_isComplete:l}=this;e?r.error(a):(s||l)&&(i&&r.next(n),r.complete())}next(r){this.isStopped||(this._value=r,this._hasValue=!0)}complete(){const{_hasValue:r,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,r&&super.next(e),super.complete())}}var F=c(5191),T=c(5684),Z=c(5698);class V{constructor(){}loadScript(r,e,i,n=null){if(typeof document<"u"&&!document.getElementById(r)){let a=document.createElement("script");a.async=!0,a.src=e,a.onload=i,n||(n=document.head),n.appendChild(a)}}}class B{}const $={oneTapEnabled:!0};let x=(()=>{class t extends V{constructor(e,i){super(),this.clientId=e,this.initOptions=i,this.changeUser=new o.vpe,this._socialUser=new w.X(null),this._accessToken=new w.X(null),this._receivedAccessToken=new o.vpe,this.initOptions={...$,...this.initOptions},this._socialUser.pipe((0,T.T)(1)).subscribe(this.changeUser),this._accessToken.pipe((0,T.T)(1)).subscribe(this._receivedAccessToken)}initialize(e){return new Promise((i,n)=>{try{this.loadScript(t.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:a})=>{const s=this.createSocialUser(a);this._socialUser.next(s)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,p.h)(a=>null===a)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const a=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(s=>s).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:a,prompt:this.initOptions.prompt,callback:s=>{s.error?this._accessToken.error({code:s.error,description:s.error_description,uri:s.error_uri}):this._accessToken.next(s.access_token)}})}i()})}catch(a){n(a)}})}getLoginStatus(){return new Promise((e,i)=>{this._socialUser.value?e(this._socialUser.value):i(`No user is currently logged in with ${t.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,i)=>{google.accounts.id.revoke(this._socialUser.value.id,n=>{n.error?i(n.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,i)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,Z.q)(1)).subscribe(e)):i(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,i)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):i("No access token to revoke"):i("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var e=this;return(0,R.Z)(function*(){google.accounts.id.disableAutoSelect(),e._socialUser.next(null)})()}createSocialUser(e){const i=new B;i.idToken=e;const n=this.decodeJwt(e);return i.id=n.sub,i.name=n.name,i.email=n.email,i.photoUrl=n.picture,i.firstName=n.given_name,i.lastName=n.family_name,i}decodeJwt(e){const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(window.atob(n).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(a)}}return t.PROVIDER_ID="GOOGLE",t})(),P=(()=>{class t{get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(e,i,n){this._ngZone=i,this._injector=n,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new j.t(1),this.initialized=!1,this._initState=new G,e instanceof Promise?e.then(a=>{this.initialize(a)}):this.initialize(e)}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:i=console.error}=e;e.providers.forEach(n=>{this.providers.set(n.id,"prototype"in n.provider?this._injector.get(n.provider):n.provider)}),Promise.all(Array.from(this.providers.values()).map(n=>n.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const n=[];let a=!1;this.providers.forEach((s,l)=>{const O=s.getLoginStatus();n.push(O),O.then(D=>{this.setUser(D,l),a=!0}).catch(console.debug)}),Promise.all(n).catch(()=>{a||(this._user=null,this._authState.next(null))})}this.providers.forEach((n,a)=>{(0,F.b)(n.changeUser)&&n.changeUser.subscribe(s=>{this._ngZone.run(()=>{this.setUser(s,a)})})})}).catch(n=>{i(n)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){var i=this;return(0,R.Z)(function*(){const n=i.providers.get(e);if(!i.initialized)throw t.ERR_NOT_INITIALIZED;if(!n)throw t.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(n instanceof x))throw t.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield n.getAccessToken()})()}refreshAuthToken(e){return new Promise((i,n)=>{if(this.initialized){const a=this.providers.get(e);a?"function"!=typeof a.refreshToken?n(t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):a.refreshToken().then(s=>{this.setUser(s,e),i()}).catch(s=>{n(s)}):n(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(t.ERR_NOT_INITIALIZED)})}refreshAccessToken(e){return new Promise((i,n)=>{if(this.initialized)if(e!==x.PROVIDER_ID)n(t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const a=this.providers.get(e);a instanceof x?a.revokeAccessToken().then(i).catch(n):n(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(t.ERR_NOT_INITIALIZED)})}signIn(e,i){return new Promise((n,a)=>{if(this.initialized){let s=this.providers.get(e);s?s.signIn(i).then(l=>{this.setUser(l,e),n(l)}).catch(l=>{a(l)}):a(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else a(t.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((i,n)=>{if(this.initialized)if(this._user){let s=this.providers.get(this._user.provider);s?s.signOut(e).then(()=>{i(),this.setUser(null)}).catch(l=>{n(l)}):n(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(t.ERR_NOT_LOGGED_IN);else n(t.ERR_NOT_INITIALIZED)})}setUser(e,i){e&&i&&(e.provider=i),this._user=e,this._authState.next(e)}}return t.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",t.ERR_NOT_LOGGED_IN="Not logged in",t.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",t.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",t.\u0275fac=function(e){return new(e||t)(o.LFG("SocialAuthServiceConfig"),o.LFG(o.R0b),o.LFG(o.zs3))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),H=(()=>{class t{constructor(e,i,n,a){this.router=void 0,this._ngZone=void 0,this.authenticationService=void 0,this.authService=void 0,this.onDestroy$=new g.x,this.router=e,this._ngZone=i,this.authenticationService=n,this.authService=a}ngOnInit(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"210267773068-m3nvq2q18bug70vojhiect78nv8i81g5.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(document.getElementById("googleLoginButton"),{theme:"outline",size:"large",text:"continue_with"})}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}handleCredentialResponse(e){this.authenticationService.googleLogin(e.credential).pipe((0,M.R)(this.onDestroy$)).subscribe(()=>{this._ngZone.run(()=>{this.router.navigate(["/"])})})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(u.F0),o.Y36(o.R0b),o.Y36(m.$),o.Y36(P))},t.\u0275cmp=o.Xpm({type:t,selectors:[["pp-google-login"]],standalone:!0,features:[o._Bn([m.$,P,{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:x.PROVIDER_ID,provider:new x("210267773068-m3nvq2q18bug70vojhiect78nv8i81g5.apps.googleusercontent.com")}]}}]),o.jDz],decls:1,vars:0,consts:[["id","googleLoginButton"]],template:function(e,i){1&e&&o._UZ(0,"div",0)},dependencies:[v.ez,z],styles:["[_nghost-%COMP%]{width:100%}"],changeDetection:0}),t})();function K(t,r){if(1&t){const e=o.EpF();o.TgZ(0,"mat-icon",22),o.NdJ("click",function(){o.CHM(e);const n=o.oxw();return o.KtG(n.togglePasswordVisibility())}),o._uU(1),o.qZA()}if(2&t){const e=o.oxw();o.xp6(1),o.hij(" ",e.passwordVisible?"visibility_off":"visibility"," ")}}const q=function(){return{required:"Wprowad\u017a adres e-mail",pattern:"Adres e-mail jest nieprawid\u0142owy",busy:"Podany adres e-mail jest ju\u017c u\u017cywany"}},J=function(){return{required:"Wprowad\u017a has\u0142o",pattern:"Has\u0142o powinno zawiera\u0107 od 8 do 30 znak\xf3w, w tym jedna cyfra"}};let X=(()=>{class t{constructor(e,i){this.authenticationService=void 0,this.router=void 0,this.REGISTER_LINK=`/${f.G.AUTHENTICATION}/${f.G.REGISTER}`,this.onDestroy$=new g.x,this.form=new d.cw({email:new d.NI("",d.kI.compose([d.kI.required,d.kI.pattern(_.s)])),password:new d.NI("",d.kI.compose([d.kI.required,d.kI.pattern(_.l)]))},{updateOn:"change"}),this.passwordVisible=!1,this.authenticationService=e,this.router=i}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}login(){this.form.valid&&this.authenticationService.login(this.form.value).pipe((0,p.h)(e=>!!e),(0,h.b)(()=>this.router.navigate(["/"])),(0,M.R)(this.onDestroy$)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(m.$),o.Y36(u.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["pp-login"]],standalone:!0,features:[o._Bn([m.$]),o.jDz],decls:39,vars:8,consts:[[1,"content","fixWidth"],[1,"maxWidth"],[1,"box",3,"formGroup","ngSubmit"],[1,"login"],["label","login lub e-mail","placeholder","Wprowad\u017a adres e-mail","controlName","email",3,"ppErrorMessage"],["label","has\u0142o","placeholder","8-30 znak\xf3w, w tym cyfra","controlName","password",3,"type","suffixTemplate","ppErrorMessage"],[1,"get"],["href","https://www.youtube.com/watch?v=E8mH9uT0S1A","target","_blank",1,"text"],["type","submit",1,"button","button-login","cursor-pointer"],[1,"or"],[1,"line"],[1,"margin"],["type","button",1,"button","button-bottom"],["src","https://a.allegroimg.com/original/346332/47549ea444eba9db98fe50d3f374/information-social-facebook-1b4340531f.svg",1,"img"],["src","https://assets.allegrostatic.com/sc-13390/statics/phone_icon_efb43bd6.svg",1,"img"],[1,"box","nextBox"],[1,"register","cursor-pointer",3,"routerLink"],[1,"box","remove"],[1,"regulamin","fixWidth"],["href","https://www.youtube.com/watch?v=x0Zr0kN0VeI","target","_blank",1,"regulamin","link"],["href","https://policja.pl/","target","_blank",1,"regulamin","link"],["suffixPassword",""],["matSuffix","",1,"cursor-pointer",3,"click"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"form",2),o.NdJ("ngSubmit",function(){return i.login()}),o.TgZ(3,"span",3),o._uU(4,"Zaloguj si\u0119"),o.qZA(),o._UZ(5,"pp-input",4)(6,"pp-input",5),o.TgZ(7,"div",6)(8,"a",7),o._uU(9," Odzyskaj has\u0142o "),o.qZA()(),o.TgZ(10,"button",8),o._uU(11," ZALOGUJ SI\u0118 "),o.qZA(),o.TgZ(12,"div",9),o._UZ(13,"div",10),o.TgZ(14,"span"),o._uU(15,"lub"),o.qZA(),o._UZ(16,"div",10),o.qZA(),o._UZ(17,"pp-google-login",11),o.TgZ(18,"button",12),o._UZ(19,"img",13),o._uU(20," KONTYNUUJ PRZEZ FACEBOOK "),o.qZA(),o.TgZ(21,"button",12),o._UZ(22,"img",14),o._uU(23," U\u017bYJ NUMERU TELEFONU "),o.qZA()(),o.TgZ(24,"div",15)(25,"b"),o._uU(26,"Nie masz konta?"),o.qZA(),o.TgZ(27,"span",16),o._uU(28," ZA\u0141\xd3\u017b KONTO "),o.qZA()()(),o._UZ(29,"div",17),o.qZA(),o.TgZ(30,"div",18),o._uU(31," Loguj\u0105c si\u0119 do ZmitaCart akceptujesz "),o.TgZ(32,"a",19),o._uU(33," Regulamin "),o.qZA(),o._uU(34," w aktualnym brzmieniu obowi\u0105zuj\u0105cym od dnia 29.02.1928. Informacje o planowanych oraz archiwalnych zmianach Regulaminu s\u0105 dost\u0119pne na "),o.TgZ(35,"a",20),o._uU(36," stronie "),o.qZA()(),o.YNc(37,K,2,1,"ng-template",null,21,o.W1O)),2&e){const n=o.MAs(38);o.xp6(2),o.Q6J("formGroup",i.form),o.xp6(3),o.Q6J("ppErrorMessage",o.DdM(6,q)),o.xp6(1),o.Q6J("type",i.passwordVisible?"text":"password")("suffixTemplate",n)("ppErrorMessage",o.DdM(7,J)),o.xp6(21),o.Q6J("routerLink",i.REGISTER_LINK)}},dependencies:[v.ez,d.u5,d._Y,d.JL,y.a,d.UX,d.sg,b.Ps,b.Hw,u.Bz,u.rH,H],styles:["[_nghost-%COMP%]{background-color:var(--background-login-color);padding-top:16px;padding-bottom:24px;flex:1}.content[_ngcontent-%COMP%]{margin-inline:auto;display:flex;gap:var(--gap-m)}.fixWidth[_ngcontent-%COMP%]{padding-inline:30px;width:65%}@media (max-width: 1200px){.fixWidth[_ngcontent-%COMP%]{width:55%}}@media (max-width: 768px){.fixWidth[_ngcontent-%COMP%]{width:100%;margin:unset}}.regulamin[_ngcontent-%COMP%]{padding-top:8px;margin-inline:auto;font-size:var(--font-xs)}.regulamin[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:0;color:var(--color-allegro-orange);text-decoration:none}.box[_ngcontent-%COMP%]{width:100%;min-width:400px;padding-inline:25px;padding-top:20px;padding-bottom:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;transition:padding-top .2s ease,padding-bottom .2s ease,box-shadow .2s ease;box-shadow:0 2px 6px #0000001a}.nextBox[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row;justify-content:flex-start;gap:var(--gap-s);padding-block:10px}.register[_ngcontent-%COMP%]{color:var(--color-allegro-green);line-height:var(--lineHeight-xl);vertical-align:middle;letter-spacing:2px}.bold[_ngcontent-%COMP%]{font-weight:700}.button[_ngcontent-%COMP%]{width:100%;background-color:var(--color-allegro-orange);color:#fff;border:0;padding-inline:16px;height:40px}.button-bottom[_ngcontent-%COMP%]{background-color:#fff;color:#222;border:1px solid #aaa;margin-bottom:15px;position:relative;display:flex;justify-content:center;align-items:center}.img[_ngcontent-%COMP%]{position:absolute;left:8px}.margin[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:center;width:100%}.get[_ngcontent-%COMP%]{width:100%;margin-top:24px;margin-bottom:16px}.get[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--color-allegro-green);text-decoration:none!important}.line[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #ddd}.or[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--gap-xs);width:100%;padding-block:12px}.login[_ngcontent-%COMP%]{font-size:var(--font-l);font-weight:500;color:#222;margin-bottom:14px;font-family:Roboto;width:100%}@media (max-width: 1200px){.remove[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),t})()},5861:(L,I,c)=>{function v(_,y,b,f,u,m,g){try{var p=_[m](g),h=p.value}catch(M){return void b(M)}p.done?y(h):Promise.resolve(h).then(f,u)}function d(_){return function(){var y=this,b=arguments;return new Promise(function(f,u){var m=_.apply(y,b);function g(h){v(m,f,u,g,p,"next",h)}function p(h){v(m,f,u,g,p,"throw",h)}g(void 0)})}}c.d(I,{Z:()=>d})}}]);